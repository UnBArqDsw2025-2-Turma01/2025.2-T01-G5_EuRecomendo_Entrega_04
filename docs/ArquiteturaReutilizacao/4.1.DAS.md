# Documentação de Arquitetura de Software (DAS)

## Introdução

A Documentação de Arquitetura de Software (DAS) tem como objetivo representar uma série de visões arquiteturais, as quais são fragmentos que ilustram os elementos "significativos em termos de arquitetura" em modelos.

Este documento apresenta a arquitetura do sistema **EuRecomendo**, um sistema de recomendação de livros que utiliza algoritmos de machine learning para sugerir leituras personalizadas aos usuários.

## Elementos Fundamentais

No RUP existe um conjunto típico de visões chamado de "modelo de visão 4+1", o qual é composto por:

1. A **Visão de Casos de Uso**, a qual é responsável por conter os casos de uso e cenários que abrangem comportamentos significativos em termos de arquitetura. É um subconjunto do modelo de casos de uso.

2. A **Visão Lógica**, a qual é responsável por conter as classes de design mais importantes bem como sua organização em pacotes e subsistemas, de forma que eles são organizados em camadas.

3. A **Visão de Implementação**, a qual é responsável por conter a visão geral do modelo de implementação e sua organização em termos de módulos, organizados em pacotes e camadas. É um subconjunto do modelo de implementação.

4. A **Visão de Processos**, a qual é responsável por conter a descrição das tarefas (processo e threads) envolvidas, suas interações e configurações, e a alocação dos objetos e classes de design em tarefas. Cabe ressaltar que essa visão só precisará ser utilizada, caso o sistema tenha um grau significativo de simultaneidade. No RUP, a visão de processos é um subconjunto do modelo de design.

5. A **Visão de Implantação**, a qual é responsável por conter a descrição dos vários nós físicos da maior parte das configurações comuns de plataforma bem como a alocação de tarefas nos nós físicos. É um subconjunto do modelo de implantação.

Cabe ressaltar que existe também a **Visão de Dados**, quando o sistema tem camada de persistência. Ela é responsável por conter um detalhamento do banco de dados, geralmente com um Modelo de Entidade e Relacionamento ou equivalente.

## Contexto do Sistema EuRecomendo

### Visão Geral

O **EuRecomendo** é uma plataforma web de recomendação de livros que permite aos usuários:
- Descobrir novos livros através de recomendações personalizadas
- Avaliar e comentar sobre livros lidos
- Gerenciar sua biblioteca pessoal
- Receber sugestões baseadas em seus gostos e histórico de leitura

### Objetivos Arquiteturais

1. **Escalabilidade**: Suportar crescimento no número de usuários e volume de dados
2. **Performance**: Gerar recomendações em tempo aceitável (< 2 segundos)
3. **Manutenibilidade**: Facilitar evolução e correção do sistema
4. **Reutilização**: Aproveitar frameworks e bibliotecas consolidadas
5. **Segurança**: Proteger dados dos usuários e garantir autenticação adequada

### Restrições Arquiteturais

- **Tecnologia**: Python 3.10+, Django 4.x
- **Banco de Dados**: PostgreSQL 14+
- **Deployment**: Containerização com Docker
- **Autenticação**: JWT (JSON Web Tokens)
- **API**: RESTful seguindo padrões HTTP

## Representação Arquitetural

### Padrão Arquitetural Principal

O sistema segue uma **arquitetura em camadas** (Layered Architecture) com as seguintes camadas:

1. **Camada de Apresentação (API Layer)**
   - Endpoints REST
   - Serialização/Deserialização de dados
   - Validação de entrada
   - Autenticação e autorização

2. **Camada de Negócio (Business Logic Layer)**
   - Serviços de domínio
   - Regras de negócio
   - Orquestração de processos
   - Algoritmos de recomendação

3. **Camada de Dados (Data Access Layer)**
   - Modelos ORM (Django Models)
   - Repositórios
   - Queries e persistência

4. **Camada de Infraestrutura**
   - Cache (Redis)
   - Task Queue (Celery)
   - Logging e Monitoring

### Estilo Arquitetural

O sistema utiliza uma combinação de estilos:

- **REST (Representational State Transfer)**: Para comunicação cliente-servidor
- **Event-Driven**: Para processamento assíncrono de tarefas
- **Repository Pattern**: Para abstração de acesso a dados
- **Service Layer**: Para encapsular lógica de negócio

## Metas e Restrições da Arquitetura

### Metas de Qualidade

| Atributo | Meta | Estratégia |
|----------|------|------------|
| Performance | Recomendações em < 2s | Cache, processamento assíncrono |
| Escalabilidade | 10.000 usuários simultâneos | Stateless API, horizontal scaling |
| Disponibilidade | 99.5% uptime | Health checks, graceful degradation |
| Segurança | Zero vazamento de dados | JWT, HTTPS, validação de entrada |
| Manutenibilidade | Cobertura de testes > 80% | Testes automatizados, CI/CD |

### Restrições Técnicas

- **Linguagem**: Python (compatibilidade com bibliotecas de ML)
- **Framework**: Django (produtividade e ecossistema)
- **Banco de Dados**: PostgreSQL (ACID, relações complexas)
- **Deployment**: Docker (portabilidade)
- **Orçamento**: Infraestrutura cloud com custo controlado

## Visões Arquiteturais

Este documento está organizado nas seguintes visões:

### [4.1.1. Introdução](./PaginasDas/Introducao.md)
Contexto, objetivos e escopo da documentação.

### [4.1.2. Visão Lógica](./PaginasDas/VisaoLogica.md)
Estrutura estática do sistema:
- Diagrama de Pacotes
- Diagrama de Classes
- Padrões de Design aplicados

### [4.1.3. Visualização de Processo](./4.1.2.Processo.md)
Comportamento dinâmico:
- Diagramas de Atividades
- Diagramas de Sequência
- Diagramas de Estados

### [4.1.4. Visualização de Casos de Uso](./PaginasDas/CasosDeUso.md)
Funcionalidades do sistema:
- Diagrama de Casos de Uso
- Especificações detalhadas
- Atores e relacionamentos

### [4.1.5. Visualização de Implantação](./PaginasDas/Implantacao.md)
Infraestrutura física:
- Diagrama de Implantação
- Configuração de servidores
- Estratégia de deploy

## Decisões Arquiteturais Significativas

### DA-01: Monolito Modular vs Microserviços
**Decisão**: Implementar como monolito modular  
**Justificativa**: Simplicidade de desenvolvimento, deploy e debugging para o escopo atual  
**Consequências**: Facilita início do projeto, mas pode requerer refatoração futura para microserviços

### DA-02: Processamento Síncrono vs Assíncrono
**Decisão**: Usar Celery para processamento assíncrono de recomendações  
**Justificativa**: Algoritmos de ML podem ser lentos, não devem bloquear requisições HTTP  
**Consequências**: Maior complexidade de infraestrutura, mas melhor experiência do usuário

### DA-03: Cache de Recomendações
**Decisão**: Implementar cache em Redis para recomendações frequentes  
**Justificativa**: Reduzir carga computacional e melhorar tempo de resposta  
**Consequências**: Necessidade de estratégia de invalidação de cache

### DA-04: Autenticação Stateless
**Decisão**: Usar JWT ao invés de sessões server-side  
**Justificativa**: Facilita escalabilidade horizontal e integração com apps mobile  
**Consequências**: Tokens não podem ser revogados facilmente (usar refresh tokens)

## Tecnologias e Frameworks

### Backend
- **Django 4.x**: Framework web principal
- **Django REST Framework**: Construção de APIs REST
- **Celery**: Task queue para processamento assíncrono
- **Redis**: Cache e message broker

### Banco de Dados
- **PostgreSQL**: Banco de dados relacional principal
- **Redis**: Cache em memória

### Autenticação
- **djangorestframework-simplejwt**: Implementação JWT

### Machine Learning
- **scikit-learn**: Algoritmos de recomendação
- **pandas**: Manipulação de dados
- **numpy**: Computação numérica

### DevOps
- **Docker**: Containerização
- **Docker Compose**: Orquestração local
- **Gunicorn**: WSGI server
- **Nginx**: Reverse proxy

## Referências

1. Arquitetura e desenho de software, aula - arquitetura & DAS - parte I e II. Disponível em: Aprender3 UnB. Acesso em: 21 de novembro de 2025.

2. KRUCHTEN, Philippe. **The 4+1 View Model of Architecture**. IEEE Software, vol. 12, no. 6, pp. 42-50, Nov. 1995.

3. BASS, Len; CLEMENTS, Paul; KAZMAN, Rick. **Software Architecture in Practice**. 3rd ed. Addison-Wesley, 2012.

4. Django Documentation. Disponível em: https://docs.djangoproject.com/. Acesso em: 21 de novembro de 2025.

## Histórico de Versões

| **Data**       | **Versão** | **Descrição**                         | **Autor**                                      | **Revisor**                                      | **Data da Revisão** |
| :--------: | :----: | :-------------------------------- | :----------------------------------------: | :----------------------------------------: | :-------------: |
| 21/11/2025 |  `1.0`   | Criação do documento DAS completo | Pedro Braga ([@Stain19](https://github.com/Stain19)) | - |   -    |